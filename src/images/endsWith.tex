\input{_header.tex}

\matrix (A) [collection, name prefix=a] {
  \node (1)   {$a_1$};     &
  \ellipsis                &
  \node (n-4) {$a_{n-4}$}; &
  \node (n-3) {$a_{n-3}$}; &
  \node (n-2) {$a_{n-2}$}; &
  \node (n-1) {$a_{n-1}$}; &
  \node (n)   {$a_n$};     \\
};

\matrix [collection, below of=A, matrix anchor=bn.west, node distance=3cm] at (an.west) {
  \node (bn-3) {$a_{n-3}$}; &
  \node (bn-2) {$a_{n-2}$}; &
  \node (bn-1) {$b$}; &
  \node (bn)   {$a_n$};     \\
};

\begin{scope}
  \tikzstyle{every path}=[Latex-Latex]
  \tikzstyle{every node}=[arrow label]
  \draw (an-3) -- node {== \true} (bn-3);
  \draw (an-2) -- node {== \true} (bn-2);
  \draw (an-1) -- node (pn-1) {== \false} (bn-1);
\end{scope}

\node (B) [elem, right=3cm of pn-1] {\false};
\draw [arrow] (pn-1) -- (B);

\input{_footer.tex}
